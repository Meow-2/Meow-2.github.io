import{_ as p}from"./ValaxyMain.vue_vue_type_style_index_0_lang-bf8ee3fd.js";import{_ as d,p as D,c as C,w as e,o as y,e as u,a as l,d as s,b as n,r as t,f as h}from"./app-4433fae6.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-80290804.js";import"./YunCard.vue_vue_type_style_index_0_lang-e4df850e.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-80be03ea.js";const H=JSON.parse('{"title":"Linux 下调节外接显示器亮度的方法","description":"","frontmatter":{"title":"Linux 下调节外接显示器亮度的方法","toc":true,"date":"2023-02-22T15:48:17.000Z","tags":["Linux","DDC/CI","i2c"],"categories":["Linux"],"cover":null},"headers":[{"level":2,"title":"软件包","slug":"软件包","link":"#软件包","children":[]},{"level":2,"title":"配置","slug":"配置","link":"#配置","children":[]},{"level":2,"title":"命令","slug":"命令","link":"#命令","children":[]},{"level":2,"title":"备注","slug":"备注","link":"#备注","children":[]},{"level":2,"title":"参考资料","slug":"参考资料","link":"#参考资料","children":[]}],"relativePath":"pages/posts/linux/linux-ddcci.md","path":"/home/runner/work/YlYZ/YlYZ/pages/posts/linux/linux-ddcci.md","lastUpdated":1686297441000}'),c=JSON.parse('{"title":"Linux 下调节外接显示器亮度的方法","description":"","frontmatter":{"title":"Linux 下调节外接显示器亮度的方法","toc":true,"date":"2023-02-22T15:48:17.000Z","tags":["Linux","DDC/CI","i2c"],"categories":["Linux"],"cover":null},"headers":[{"level":2,"title":"软件包","slug":"软件包","link":"#软件包","children":[]},{"level":2,"title":"配置","slug":"配置","link":"#配置","children":[]},{"level":2,"title":"命令","slug":"命令","link":"#命令","children":[]},{"level":2,"title":"备注","slug":"备注","link":"#备注","children":[]},{"level":2,"title":"参考资料","slug":"参考资料","link":"#参考资料","children":[]}],"relativePath":"pages/posts/linux/linux-ddcci.md","path":"/home/runner/work/YlYZ/YlYZ/pages/posts/linux/linux-ddcci.md","lastUpdated":1686297441000}'),F={name:"pages/posts/linux/linux-ddcci.md",data(){return{data:c,frontmatter:c.frontmatter}},setup(){D("pageData",c)}},m=l("p",null,[s("笔记本屏幕亮度的调节十分方便，使用 acpi 模块提供的硬件接口 "),l("code",null,"/sys/class/backlight"),s("即可进行，我常用的软件包"),l("code",null,"xbacklight"),s("就是基于此")],-1),A=l("p",null,"但是外接显示器的亮度调节不像笔记本屏幕那样方便，需要通过 DDC/CI 协议与 i2c 设备进行通信来实现",-1),_={id:"软件包",tabindex:"-1"},g={id:"配置",tabindex:"-1"},f=l("blockquote",null,[l("p",null,"为了检测到 i2c 设备，需要载入内核模块 i2c-dev")],-1),E=l("ol",null,[l("li",null,"创建 /etc/modules-load.d/i2c.conf，在其中写下：")],-1),k=l("div",{class:"language-/etc/modules-load.d/i2c.conf"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"i2c-dev")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}})])])])],-1),v=l("p",null,"这样 Linux 在启动时会自动加载 i2c-dev 模块",-1),B=l("ol",{start:"2"},[l("li",null,"此时 i2c 设备只有 root 用户才能访问，为了使用普通账户访问，需要将用户添加到 i2c 组")],-1),x=l("div",{class:"language-bash"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#FFCB6B"}},"sudo"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"groupadd"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"--system"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"i2c")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#FFCB6B"}},"sudo"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"usermod"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"<"),l("span",{style:{color:"#C3E88D"}},"user-nam"),l("span",{style:{color:"#A6ACCD"}},"e"),l("span",{style:{color:"#89DDFF"}},">"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"-aG"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"i2c")]),s(`
`),l("span",{class:"line"})])])],-1),b={id:"命令",tabindex:"-1"},$=l("p",null,[s("查看"),l("code",null,"Feature 10"),s("的功能")],-1),w=l("div",{class:"language-bash"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#FFCB6B"}},"ddcutil"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"capabilities"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"|"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"grep"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"Feature: 10"),l("span",{style:{color:"#89DDFF"}},'"')]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"# output")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"# Feature: 10 (Brightness)")]),s(`
`),l("span",{class:"line"})])])],-1),L=l("p",null,"查询当前亮度",-1),Y=l("div",{class:"language-bash"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#FFCB6B"}},"ddcutil"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"getvcp"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F78C6C"}},"10"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"|"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"grep"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"-i"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"Brightness"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"|"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"awk"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"{print $9}"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"|"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"sed"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"s/,$//"),l("span",{style:{color:"#89DDFF"}},"'")]),s(`
`),l("span",{class:"line"})])])],-1),N=l("p",null,"升高/降低当前亮度",-1),Z=l("div",{class:"language-bash"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"current_backlight"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},"$("),l("span",{style:{color:"#FFCB6B"}},"ddcutil"),l("span",{style:{color:"#C3E88D"}}," getvcp "),l("span",{style:{color:"#F78C6C"}},"10"),l("span",{style:{color:"#C3E88D"}}," "),l("span",{style:{color:"#89DDFF"}},"|"),l("span",{style:{color:"#C3E88D"}}," "),l("span",{style:{color:"#FFCB6B"}},"grep"),l("span",{style:{color:"#C3E88D"}}," -i "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"Brightness"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}}," "),l("span",{style:{color:"#89DDFF"}},"|"),l("span",{style:{color:"#C3E88D"}}," "),l("span",{style:{color:"#FFCB6B"}},"awk"),l("span",{style:{color:"#C3E88D"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"{print $9}"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}}," "),l("span",{style:{color:"#89DDFF"}},"|"),l("span",{style:{color:"#C3E88D"}}," "),l("span",{style:{color:"#FFCB6B"}},"sed"),l("span",{style:{color:"#C3E88D"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"s/,$//"),l("span",{style:{color:"#89DDFF"}},"')")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#FFCB6B"}},"ddcutil"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"setvcp"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F78C6C"}},"10"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"$(("),l("span",{style:{color:"#C3E88D"}},"current_backlight "),l("span",{style:{color:"#89DDFF"}},"+"),l("span",{style:{color:"#C3E88D"}}," "),l("span",{style:{color:"#F78C6C"}},"20"),l("span",{style:{color:"#89DDFF"}},"))")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#FFCB6B"}},"ddcutil"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"setvcp"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F78C6C"}},"10"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"$(("),l("span",{style:{color:"#C3E88D"}},"current_backlight "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#C3E88D"}}," "),l("span",{style:{color:"#F78C6C"}},"20"),l("span",{style:{color:"#89DDFF"}},"))")]),s(`
`),l("span",{class:"line"})])])],-1),V={id:"备注",tabindex:"-1"},I=l("p",null,[s("ddcutil 指令是有些耗时的，如果使用 dwm 这类窗口管理器，在自己编写亮度显示脚本的时候不要一直使用 "),l("code",null,"ddcutil getvcp"),s(" 来获取亮度，会造成卡顿，正确的做法是，开机时获取一次亮度，并导出成环境变量，然后每次都从环境变量中读取亮度，然后更改亮度的同时，更改环境变量，这样就可以避免卡顿")],-1),P={id:"参考资料",tabindex:"-1"};function S(o,T,J,O,r,U){const a=h,i=p;return y(),C(i,{frontmatter:r.frontmatter,data:r.data},{"main-content-md":e(()=>[m,A,u(" more "),l("h2",_,[s("软件包 "),n(a,{class:"header-anchor",href:"#软件包","aria-hidden":"true"},{default:e(()=>[s("#")]),_:1})]),l("p",null,[n(a,{href:"https://archlinux.org/packages/extra/x86_64/ddcutil/",target:"_blank",rel:"noreferrer"},{default:e(()=>[s("ddcutil")]),_:1})]),l("h2",g,[s("配置 "),n(a,{class:"header-anchor",href:"#配置","aria-hidden":"true"},{default:e(()=>[s("#")]),_:1})]),f,E,k,v,B,x,l("h2",b,[s("命令 "),n(a,{class:"header-anchor",href:"#命令","aria-hidden":"true"},{default:e(()=>[s("#")]),_:1})]),$,w,L,Y,N,Z,l("h2",V,[s("备注 "),n(a,{class:"header-anchor",href:"#备注","aria-hidden":"true"},{default:e(()=>[s("#")]),_:1})]),I,l("h2",P,[s("参考资料 "),n(a,{class:"header-anchor",href:"#参考资料","aria-hidden":"true"},{default:e(()=>[s("#")]),_:1})]),l("ol",null,[l("li",null,[n(a,{href:"https://wiki.archlinuxcn.org/wiki/%E8%83%8C%E5%85%89",target:"_blank",rel:"noreferrer"},{default:e(()=>[s("背光 - Arch Linux 中文维基")]),_:1})]),l("li",null,[n(a,{href:"https://www.cnblogs.com/ye-xiaoming/p/15808291.html",target:"_blank",rel:"noreferrer"},{default:e(()=>[s("linux 中外接显示器亮度调节方法 - 烨小明 - 博客园")]),_:1})]),l("li",null,[n(a,{href:"https://www.ddcutil.com/i2c_permissions/",target:"_blank",rel:"noreferrer"},{default:e(()=>[s("I2C Device Permissions - ddcutil Documentation")]),_:1})])])]),"main-header":e(()=>[t(o.$slots,"main-header")]),"main-header-after":e(()=>[t(o.$slots,"main-header-after")]),"main-nav":e(()=>[t(o.$slots,"main-nav")]),"main-content":e(()=>[t(o.$slots,"main-content")]),"main-content-after":e(()=>[t(o.$slots,"main-content-after")]),"main-nav-before":e(()=>[t(o.$slots,"main-nav-before")]),"main-nav-after":e(()=>[t(o.$slots,"main-nav-after")]),comment:e(()=>[t(o.$slots,"comment")]),footer:e(()=>[t(o.$slots,"footer")]),aside:e(()=>[t(o.$slots,"aside")]),"aside-custom":e(()=>[t(o.$slots,"aside-custom")]),default:e(()=>[t(o.$slots,"default")]),_:3},8,["frontmatter","data"])}const K=d(F,[["render",S]]);export{H as __pageData,K as default};

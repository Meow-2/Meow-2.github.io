import{_ as D}from"./ValaxyMain.vue_vue_type_style_index_0_lang-bf8ee3fd.js";import{_ as y,p as i,c as C,w as n,o as F,e as A,a as s,d as l,b as a,r as t,f as d}from"./app-4433fae6.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-80290804.js";import"./YunCard.vue_vue_type_style_index_0_lang-e4df850e.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-80be03ea.js";const gs=JSON.parse('{"title":"scanf 是如何工作的","description":"","frontmatter":{"title":"scanf 是如何工作的","toc":true,"date":"2022-02-20T16:11:25.000Z","tags":["Cpp"],"categories":["C++"],"cover":null},"headers":[{"level":2,"title":"输入缓冲区","slug":"输入缓冲区","link":"#输入缓冲区","children":[]},{"level":2,"title":"scanf() 读取缓冲区的规则","slug":"scanf-读取缓冲区的规则","link":"#scanf-读取缓冲区的规则","children":[]},{"level":2,"title":"总结","slug":"总结","link":"#总结","children":[]}],"relativePath":"pages/posts/cpp/scanf.md","path":"/home/runner/work/YlYZ/YlYZ/pages/posts/cpp/scanf.md","lastUpdated":1686297441000}'),c=JSON.parse('{"title":"scanf 是如何工作的","description":"","frontmatter":{"title":"scanf 是如何工作的","toc":true,"date":"2022-02-20T16:11:25.000Z","tags":["Cpp"],"categories":["C++"],"cover":null},"headers":[{"level":2,"title":"输入缓冲区","slug":"输入缓冲区","link":"#输入缓冲区","children":[]},{"level":2,"title":"scanf() 读取缓冲区的规则","slug":"scanf-读取缓冲区的规则","link":"#scanf-读取缓冲区的规则","children":[]},{"level":2,"title":"总结","slug":"总结","link":"#总结","children":[]}],"relativePath":"pages/posts/cpp/scanf.md","path":"/home/runner/work/YlYZ/YlYZ/pages/posts/cpp/scanf.md","lastUpdated":1686297441000}'),u={name:"pages/posts/cpp/scanf.md",data(){return{data:c,frontmatter:c.frontmatter}},setup(){i("pageData",c)}},h=s("p",null,'今天有个初学编程的朋友问了我一个关于 scanf() 的问题，大概就是对书上一段有关"%d%c"的解释不太明白，但作为 Cpp 学习者的我，老实说有一万年没有用过这个 C 函数了，虽说 printf()/scanf() 在开销上是比 C++ 的 cout/cin 要小的，但我其实连 cin 都不怎么用，刚好借着这个机会来回顾回顾 scanf() 的用法，这篇文章不仅是给朋友写的，也算是我个人的一个复习，希望不要误人子弟 (ゝ ∀･)',-1),f={id:"输入缓冲区",tabindex:"-1"},m=s("p",null,[l("在讲解 scanf() 之前，需要明确一下"),s("strong",null,"输入缓冲区"),l("的概念：")],-1),_=s("p",null,"程序执行的过程中，我们在键盘上按下的键会被存储到一块内存中，这个内存块就叫做输入缓冲区。",-1),g=s("p",null,"缓冲区的存在是为了解决慢速的 I/O 设备与高速的 CPU 之间速度不匹配的问题，如果没有这个缓冲区，程序直接从键盘读取输入，那每次需要读取输入时，程序就要停下来等待用户按键盘 (标准输入设备)。",-1),E=s("p",null,"有了缓冲区，每当程序执行到 scanf() 语句时，就直接从缓冲区中拿数据而不必等待用户按键盘，如果缓冲区中没有数据，才会阻塞进程，等待用户按键盘 (用户输入)，举个例子：",-1),b=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"#include"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C3E88D"}},"cstdio"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"main"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}},"  num0 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}},"  num1 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C792EA"}},"char"),s("span",{style:{color:"#A6ACCD"}}," ch   "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#C792EA"}},"char"),s("span",{style:{color:"#A6ACCD"}}," str"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"50"),s("span",{style:{color:"#89DDFF"}},"];")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#82AAFF"}},"scanf"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"%d %d %c %s"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}},"num0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}},"num1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}},"ch"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," str"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#82AAFF"}},"printf"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"num0:%d num1:%d ch:%c str:%s"),s("span",{style:{color:"#A6ACCD"}},"\\n"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," num0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," num1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," ch"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," str"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#82AAFF"}},"scanf"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"%d%d%c%s"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}},"num0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}},"num1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}},"ch"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," str"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#82AAFF"}},"printf"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"num0:%d num1:%d ch:%c str:%s"),s("span",{style:{color:"#A6ACCD"}},"\\n"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," num0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," num1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," ch"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," str"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#82AAFF"}},"scanf"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"%d,%d,%c,%s"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}},"num0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}},"num1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}},"ch"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," str"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#82AAFF"}},"printf"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"num0:%d num1:%d ch:%c str:%s"),s("span",{style:{color:"#A6ACCD"}},"\\n"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," num0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," num1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," ch"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," str"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"})])])],-1),v=s("p",null,"上面这段程序有三个 scanf()，当执行到第一个 scanf () 时，缓冲区内没有数据，进程阻塞等待用户输入，这时候我们可以输入如下序列：",-1),x=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"0 0 a abc 1 1bbcd 2,2,c,cde回车")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),k=s("p",null,"如果你知道 scanf() 的用法，那不难推测出如下的输出：",-1),$=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"num0:0 num1:0 ch:a str:abc")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"num0:1 num1:1 ch:b str:bcd")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"num0:2 num1:2 ch:c str:cde")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),w=s("p",null,"而这个例子正好解释了缓冲区的妙用，那就是在两种设备（这里是 CPU 和 I/O 设备）存在处理速度差异时，减少一种设备等待另一种设备的时间开销（这里是减少了程序的阻塞次数）",-1),P=s("p",null,"因为有缓冲区，我们可以一次性的输入所有的数据，而不必等待程序找我们要输入，程序也不用阻塞来等待我们进行输入；如果没有缓冲区，那么上面的程序就要阻塞三次，每次阻塞后都要等待我们的键盘输入才能继续执行",-1),U=s("p",null,[l("同理，有输入缓冲区就一样有"),s("strong",null,"输出缓冲区"),l("，如果说标准输入设备是键盘的话，那标准输出设备就是电脑屏幕了（实际情况并没有这么简单，这里只是类比），屏幕绘制图形的速度肯定是比不上 CPU 处理数据的速度的，所以 CPU 处理完数据后，直接存入输出缓冲区，屏幕再读取输出缓冲区的内容进行绘制，这样 CPU 就可以一直处理数据，而不用管屏幕是不是已经把之前的数据全打印完了。")],-1),Y=s("p",null,"不止 C/C++有输入输出缓冲区，各种速度不等的设备之间都用类似缓冲区的东西，如硬盘和内存之间的缓存，GPU 和屏幕之间双缓冲机制等。",-1),N={id:"scanf-读取缓冲区的规则",tabindex:"-1"},Z=s("p",null,[l('scanf() 读取缓冲区是通过其参数中的"'),s("strong",null,"用户控制符"),l('"来控制的，用户控制符是一个由'),s("strong",null,"字符"),l("和"),s("strong",null,"转换说明"),l("组成的字符串，在 scanf() 参数的首位")],-1),q=s("p",null,[l("scanf() 将根据用户控制符的内容来从缓冲区读入输入，将"),s("strong",null,"转换说明"),l("对应的字符放入"),s("strong",null,"变量"),l("中，这些变量的地址同样需要作为参数传递给 scanf() ,"),s("strong",null,"转换说明"),l("和变量地址的数量一定要是一一对应的，例如：")],-1),V=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"scanf(%d %d %d,&a,&b,%c);    //三个转换说明，后面就需要跟三个变量的地址")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),O=s("p",null,"以下是转换说明的列表：",-1),B=s("table",null,[s("thead",null,[s("tr",null,[s("th",{style:{"text-align":"center"}},"转换说明"),s("th",{style:{"text-align":"center"}},"对应内容")])]),s("tbody",null,[s("tr",null,[s("td",{style:{"text-align":"center"}},"%c"),s("td",{style:{"text-align":"center"}},"把输入解释成字符")]),s("tr",null,[s("td",{style:{"text-align":"center"}},"%d"),s("td",{style:{"text-align":"center"}},"把输入解释成有符号十进制整数")]),s("tr",null,[s("td",{style:{"text-align":"center"}},"%e,%f,%g,%a"),s("td",{style:{"text-align":"center"}},"把输入解释成浮点数 ( C99 标准新增了%a）")]),s("tr",null,[s("td",{style:{"text-align":"center"}},"%E,%F,%G,%A"),s("td",{style:{"text-align":"center"}},"把输入解释成浮点数 (C99 标准新增了%A)")]),s("tr",null,[s("td",{style:{"text-align":"center"}},"%i"),s("td",{style:{"text-align":"center"}},"把输入解释成浮点数 (C99 标准新增了%A)")]),s("tr",null,[s("td",{style:{"text-align":"center"}},"%o"),s("td",{style:{"text-align":"center"}},"把输入解释成有符号八进制整数")]),s("tr",null,[s("td",{style:{"text-align":"center"}},"%p"),s("td",{style:{"text-align":"center"}},"把输入解释成指针 (地址)")]),s("tr",null,[s("td",{style:{"text-align":"center"}},"%s"),s("td",{style:{"text-align":"center"}},"把输入解释成字符串。从第一个非空白字符开始，到下一个空白字符之前到所有字符都是输入")]),s("tr",null,[s("td",{style:{"text-align":"center"}},"%u"),s("td",{style:{"text-align":"center"}},"把输入解释成无符号十进制整数")]),s("tr",null,[s("td",{style:{"text-align":"center"}},"%x，%X"),s("td",{style:{"text-align":"center"}},"把输入解释成有符号十六进制整数")])])],-1),S=s("p",null,"一般常用的也就是'%c','%d','%s','%f'这一些",-1),T=s("p",null,"scanf() 的用户控制符在匹配时还遵循以下四个规则：",-1),G=s("p",null,[s("strong",null,"1.转换说明匹配时会忽略缓冲区开头的所有分隔符，从第一个非分隔符开始匹配")],-1),I=s("blockquote",null,[s("p",null,"很合理吧，分隔符就是用来分隔字符，当然不匹配直接忽略了")],-1),J=s("p",null,"2.转换说明的匹配结束于下一个输入的分隔符，或者不属于转化说明的部分",-1),L=s("blockquote",null,[s("p",null,'分隔符就是用来分隔字符的，所以匹配到一个分隔符，这个转换说明就匹配结束了；什么叫不属于转换说明的部分呢？比如%d 匹配 12asdf，匹配完 12 后，asdf 显然不是十进制数字，所以就结束了，但%s 匹配 asdf12 是会匹配完的，毕竟也有"asdf12"这种字符串，像%c 匹配 asdf，就只匹配一个 a 就结束了，因为它只匹配一个字符的内容')],-1),M=s("p",null,[s("strong",null,"3.'%c'不受规则 1 的限制，也就是说'%c'会匹配分隔符")],-1),W=s("blockquote",null,[s("p",null,"有的时候，我们也会需要输入一些分隔符到程序里，所以分隔符也需要能匹配到，这个任务就交给 %c 了，匹配一些空格、换行符之类的")],-1),X=s("p",null,"4.用户控制符中的分隔符会匹配所有的任意数量的分隔符",-1),j=s("blockquote",null,[s("p",null,"%d %d 就相当与告诉你我接受“数字空格数字”或者“数字回车数字”之类的输入，另外%d%d 也是相同的效果，参照规则 2")],-1),z=s("p",null,"5.分隔符又称空白符，包括：换行符'\\n'、空格' ' 、制表符'\\t'",-1),H=s("p",null,[s("strong",null,"转换说明"),l("中也会穿插一些"),s("strong",null,"字符"),l("用来表示“我接受这种形式的输入”，接下来我们来看一下上面那个例子：")],-1),K=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"缓冲区："),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#A6ACCD"}}," a abc "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1bbcd"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"c"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"cde\\n"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#676E95","font-style":"italic"}},"    //注意 Linux 下的回车是 '\\n' ,如果是 windows 那么回车就是 '\\r\\n' ,其中 '\\r' 表示光标回到行首")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"scanf"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"%d %d %c %s"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}},"num0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}},"num1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}},"ch"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," str"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//%d匹配缓冲区的 0 到 num0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//空格匹配缓冲区的空格")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//%d匹配缓冲区的 0 到 num1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//空格匹配缓冲区的空格")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//%c匹配缓冲区的 a 到 ch")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//空格匹配缓冲区的空格")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//%s匹配缓冲区的 abc 到 str")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"printf"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"num0:%d num1:%d ch:%c str:%s"),s("span",{style:{color:"#A6ACCD"}},"\\n"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," num0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," num1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," ch"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," str"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//故输出 num0:0 num1:0 ch:a str:abc")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"剩余缓冲区："),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1bbcd"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"c"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"cde\\n"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"scanf"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"%d%d%c%s"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}},"num0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}},"num1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}},"ch"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," str"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//%d忽略缓冲区开头的空格匹配缓冲区的 1 到 num0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//%d忽略缓冲区开头的空格匹配缓冲区的 1 到 num1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//%c匹配缓冲区的 b 到 ch")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//%s匹配缓冲区的 bcd 到 str")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"printf"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"num0:%d num1:%d ch:%c str:%s"),s("span",{style:{color:"#A6ACCD"}},"\\n"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," num0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," num1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," ch"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," str"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//故输出 num0:1 num1:1 ch:b str:bcd")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"剩余缓冲区："),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"c"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}},"cde\\n"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"scanf"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"%d,%d,%c,%s"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}},"num0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}},"num1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}},"ch"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," str"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//%d忽略缓冲区开头的空格匹配缓冲区的 2 到 num0")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//，匹配缓冲区的，")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//%d匹配缓冲区的 2 到 num1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//，匹配缓冲区的，")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//%c匹配缓冲区的 c 到 ch")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//，匹配缓冲区的，")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//%s匹配缓冲区的 cde 到 str")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"printf"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"num0:%d num1:%d ch:%c str:%s"),s("span",{style:{color:"#A6ACCD"}},"\\n"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," num0"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," num1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," ch"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," str"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"//故输出 num0:2 num1:2 ch:c str:cde")]),l(`
`),s("span",{class:"line"})])])],-1),Q=s("p",null,"如果你细心的话，你会发现，在上面三个 scanf 语句后，缓冲区还留下了一个'\\n'字符",-1),R=s("p",null,[l("如果紧接着再写第四个 scanf 语句 "),s("code",null,'scanf("%c",&ch);'),l("的话，那么'\\n'将会被存入到 ch 中，如果使用 "),s("code",null,'scanf("%d",&num0);'),l("就不会出现这种情况，因为%d 会忽略掉分隔符")],-1),ss=s("p",null,[l("所以缓冲区一定要及时清空，比如用 "),s("code",null,"getchar()"),l("将剩余的那个'\\n'取出来")],-1),ls=s("p",null,"以上的例子，用户的输入非常友善，每个字符都恰好是 scanf() 能匹配到的，如果这个用户非常邪恶，将一些肮脏的东西敲进你的程序呢？",-1),ns=s("p",null,"scanf() 会尽力匹配能匹配的，如果匹配不上或者匹配完了，函数就会返回，返回值是匹配上的转换说明的个数，例如：",-1),os=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"缓冲区：[1,1asdf]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'scanf("%d,%d,%c,%s", &num0, &num1, &ch, str);')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),ts=s("p",null,"在匹配完 num0 = 1,num1 = 1 后，scanf 就会返回，返回值为 2",-1),es=s("p",null,"最后，如果你完全理解了 scanf() 的话，可以试着运行一下这段代码，并试着分析一下为什么^^",-1),as=s("div",{class:"language-"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#include <stdio.h>")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#include <stdlib.h>")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"#include <string.h>")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"char *method1(void)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    static char a[4];")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    scanf("%s\\n", a);')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    return a;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"int main(void)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    char *h = method1();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},'    printf("%s\\n", h);')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    return 0;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}})])])])],-1),cs={id:"总结",tabindex:"-1"},rs=s("p",null,"1.scanf() 并非直接从键盘读输入，而是从缓冲区中",-1),ps=s("p",null,"2.scanf() 用户控制符中的转换说明，只有%c 会读入分隔符（换行符，制表符，空格），其他如%d 之类的都会忽略分隔符，从第一个非分隔符开始匹配",-1),Ds=s("p",null,"3.scanf() 用户控制符中的空白符会匹配所有任意数量的空白符",-1),ys=s("p",null,"最后祝我的这位朋友能在代码世界里找到属于自己的乐趣～",-1);function is(o,Cs,Fs,As,r,ds){const e=d,p=D;return F(),C(p,{frontmatter:r.frontmatter,data:r.data},{"main-content-md":n(()=>[h,A(" more "),s("h2",f,[l("输入缓冲区 "),a(e,{class:"header-anchor",href:"#输入缓冲区","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),m,_,g,E,b,v,x,k,$,w,P,U,Y,s("h2",N,[l("scanf() 读取缓冲区的规则 "),a(e,{class:"header-anchor",href:"#scanf-读取缓冲区的规则","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),Z,q,V,O,B,S,T,G,I,J,L,M,W,X,j,z,H,K,Q,R,ss,ls,ns,os,ts,es,as,s("p",null,[l("这是 stackoverflow 上的一个问题，"),a(e,{href:"https://stackoverflow.com/questions/15740024/why-does-scanf-ask-twice-for-input-when-theres-a-newline-at-the-end-of-the-form",target:"_blank",rel:"noreferrer"},{default:n(()=>[l("Why does scanf ask twice for input when there's a newline at the end of the format string?")]),_:1})]),s("h2",cs,[l("总结 "),a(e,{class:"header-anchor",href:"#总结","aria-hidden":"true"},{default:n(()=>[l("#")]),_:1})]),rs,ps,Ds,ys]),"main-header":n(()=>[t(o.$slots,"main-header")]),"main-header-after":n(()=>[t(o.$slots,"main-header-after")]),"main-nav":n(()=>[t(o.$slots,"main-nav")]),"main-content":n(()=>[t(o.$slots,"main-content")]),"main-content-after":n(()=>[t(o.$slots,"main-content-after")]),"main-nav-before":n(()=>[t(o.$slots,"main-nav-before")]),"main-nav-after":n(()=>[t(o.$slots,"main-nav-after")]),comment:n(()=>[t(o.$slots,"comment")]),footer:n(()=>[t(o.$slots,"footer")]),aside:n(()=>[t(o.$slots,"aside")]),"aside-custom":n(()=>[t(o.$slots,"aside-custom")]),default:n(()=>[t(o.$slots,"default")]),_:3},8,["frontmatter","data"])}const Es=y(u,[["render",is]]);export{gs as __pageData,Es as default};
